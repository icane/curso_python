<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Jesús Fernández (fernandez.cuesta@gmail.com)">
  <meta name="keywords" content="python, intro, s06, visualización">
  <title>Python para Análisis de datos: Introducción</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../css/reveal.css">
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../css/theme/solarized.css" id="theme">
  <link rel="stylesheet" href="../css/estilo.css"/>
  <!-- Printing and PDF exports -->
  <script>
    var link = document.createElement( 'link' );
    link.rel = 'stylesheet';
    link.type = 'text/css';
    link.href = window.location.search.match( /print-pdf/gi ) ? '../css/print/pdf.css' : '../css/print/paper.css';
    document.getElementsByTagName( 'head' )[0].appendChild( link );
  </script>
  <!--[if lt IE 9]>
  <script src="../lib/js/html5shiv.js"></script>
  <![endif]-->
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide">
  <h1 class="title">Python para Análisis de datos: Introducción</h1>
  <p class="subtitle">Sesión 6</p>
  <p class="author">Jesús Fernández (fernandez.cuesta@gmail.com)</p>
  <p class="date">10 Abril 2019</p>
</section>

<section><section id="visualización-de-datos" class="title-slide slide level1"><h1>Visualización de datos</h1></section><h4 id="visualización-de-datos---introducción">Visualización de datos - Introducción</h4><section id="section" class="slide level2">
<h2></h2>
<p>Representamos datos de forma gráfica porque:</p>
<ul>
<li>Más fácil y rápido de interpretar</li>
<li>Cada dominio representa los datos de una manera</li>
<li>Alto volumen de datos: mejor visualmente</li>
</ul>
</section><section id="section-1" class="slide level2">
<h2></h2>
<p>Realizar gráficas desde un lenguaje de programación:</p>
<ul>
<li>Gráficas <del>estáticas</del> dinámicas</li>
<li>Automatizar proceso complejo
<ul>
<li>Combinar procesamiento de datos con su representación</li>
</ul></li>
<li>Personalizable
<ul>
<li>Diferentes soportes (web, publicaciones, presentaciones)</li>
</ul></li>
</ul>
</section><section id="section-2" class="slide level2">
<h2></h2>
<p>En general, seguiremos un procedimiento:</p>
<ul>
<li>Obtención de datos (BB.DD., web, logs, …)</li>
<li>Sanear y procesar los datos</li>
<li>Selección de parámetros</li>
<li>Visualización</li>
<li>Personalización (estilos)</li>
</ul>
</section><section id="section-3" class="slide level2">
<h2></h2>
<p><a href="http://www.xavierdupre.fr/app/jupytalk/helpsphinx/notebooks/10_plotting_libraries.html">Librerías más usadas</a>:</p>
<div>
<div class="smaller">
<ul>
<li class="fragment"><a href="https://matplotlib.org/">Matplotlib</a> para gráficos estáticos
<ul>
<li class="fragment">standard de-facto, basado en <a href="https://www.mathworks.com/products/matlab.html">MATLAB</a></li>
<li class="fragment">hacer fácil tareas sencillas y posible tareas complejas</li>
<li class="fragment">versátil, madura y extensa</li>
<li class="fragment">integrado con pandas (&lt;100%)</li>
<li class="fragment">acepta paquetes de terceros como <strong>extensiones</strong> (plugins)</li>
</ul></li>
<li class="fragment"><a href="https://seaborn.pydata.org/">Seaborn</a> para estadística
<ul>
<li class="fragment">enfocado a análisis de datos</li>
<li class="fragment">mejora el diseño de <code>matplotlib</code> (plugin)</li>
</ul></li>
<li class="fragment"><a href="https://bokeh.pydata.org/">Bokeh</a> para gráficas <strong>dinámicas</strong></li>
<li class="fragment"><a href="https://github.com/SciTools/cartopy">Cartopy</a>, <a href="http://python-visualization.github.io/folium/">folium</a> para mapas</li>
</ul>
</div>
</div>
</section><section id="section-4" class="slide level2">
<h2></h2>
<ul>
<li>Descargar cuaderno jupyter: <a href="code/s06/visualizacion_con_matplotlib.ipynb">matplotlib/pyplot</a></li>
<li>Iniciar jupyter (2 opciones):
<ul>
<li>Desde Anaconda Navigator (jupyter notebook &gt; <em>Launch</em>)</li>
<li><p>Desde un terminal (<code>Anaconda Prompt</code> o terminal de VSCODE):</p>
<code>&gt; jupyter notebook</code></li>
</ul></li>
<li>Abrir cuaderno descargado en jupyter</li>
<li>Ejecutar paso a paso de la siguiente sección</li>
</ul>
<blockquote>
<p>☝ <strong>Fragmentos de código encerrados entre ‘<code>#####</code>’</strong></p>
</blockquote>
</section></section>
<section><section id="matplotlibpyplot" class="title-slide slide level1"><h1><a href="https://matplotlib.org/">Matplotlib</a>/<a href="https://matplotlib.org/api/pyplot_api.html">pyplot</a></h1></section><h4 id="pyplot-módulo-con-interfaz-parecida-a-matlab"><code>pyplot</code>: módulo con interfaz parecida a <a href="https://www.mathworks.com/products/matlab.html">MATLAB</a></h4><section id="section-5" class="slide level2">
<h2></h2>
<p>Para importar <a href="https://matplotlib.org/api/pyplot_api.html">pyplot</a>:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb1-1" title="1"><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</a>
<a class="sourceLine" id="cb1-2" title="2"><span class="co"># o bien: from matplotlib import pyplot as plt</span></a>
<a class="sourceLine" id="cb1-3" title="3"><span class="co"># Además, sólo en jupyter: %matplotlib inline</span></a></code></pre></div>
</section><section id="section-6" class="slide level2">
<h2></h2>
<p>Partes de una figura</p>
<p><img data-src="images/s06/anatomy_simple.png" alt="simple_anatomy" />  <img data-src="images/s06/anatomy.png" alt="fig_anatomy" style="width:50.0%" /></p>
</section><section id="section-7" class="slide level2">
<h2></h2>
<p>Los componentes más importantes son:</p>
<div>
<ul>
<li class="fragment">Figura</li>
<li class="fragment">Ejes (axes)
<ul>
<li class="fragment">región de la figura donde se visualizarán gráficos</li>
</ul></li>
<li class="fragment">Eje (axis)
<ul>
<li class="fragment">eje de coordenadas</li>
</ul></li>
<li class="fragment">Artist
<ul>
<li class="fragment">cualquier elemento (líneas, leyenda, etc., incluidos ejes)</li>
</ul></li>
</ul>
</div>
</section><section id="section-8" class="slide level2">
<h2></h2>
<div class="smaller">
<p>Como regla general seguiremos los siguientes pasos:</p>
<ol type="1">
<li>Crear figura</li>
<li>Obtener ejes</li>
<li>Dibujar sobre los ejes</li>
<li>Añadir elementos extra (anotaciones, título)</li>
<li>Renderizar gráfica</li>
</ol>
<p><strong>Nota</strong>: 1 y 2 se pueden combinar en un mismo comando</p>
</div>
<div class="sourceCode" id="cb2"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb2-1" title="1">N <span class="op">=</span> <span class="dv">365</span></a>
<a class="sourceLine" id="cb2-2" title="2">np.random.seed(<span class="dv">2983</span>)  <span class="co"># reproducibilidad</span></a>
<a class="sourceLine" id="cb2-3" title="3">t <span class="op">=</span> pd.date_range(<span class="st">&#39;1/1/2018&#39;</span>, periods<span class="op">=</span>N)</a>
<a class="sourceLine" id="cb2-4" title="4">y <span class="op">=</span> <span class="dv">200</span> <span class="op">*</span> (np.random.randn(N).cumsum() <span class="op">+</span> <span class="dv">40</span>)</a>
<a class="sourceLine" id="cb2-5" title="5"></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="co">#####</span></a>
<a class="sourceLine" id="cb2-7" title="7">fig <span class="op">=</span> plt.figure()  <span class="co"># crea figura</span></a>
<a class="sourceLine" id="cb2-8" title="8">ax <span class="op">=</span> plt.subplot(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>)  <span class="co"># crea ejes</span></a>
<a class="sourceLine" id="cb2-9" title="9"></a>
<a class="sourceLine" id="cb2-10" title="10">ax.plot(t, y)  <span class="co"># dibuja sobre los ejes</span></a>
<a class="sourceLine" id="cb2-11" title="11"><span class="co">#####</span></a></code></pre></div>
</section><section id="section-9" class="slide level2">
<h2></h2>
<p>De forma simplificada, los ejes y la figura se crean simultáneamente:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb3-1" title="1">(fix, ax) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">1</span>)  <span class="co"># (n_filas, n_columnas)</span></a>
<a class="sourceLine" id="cb3-2" title="2"></a>
<a class="sourceLine" id="cb3-3" title="3">ax.plot(t, y)  <span class="co"># dibuja sobre los ejes</span></a></code></pre></div>
</section><section id="importante" class="slide level2">
<h2>⚠ Importante ⚠</h2>
<p>En jupyter/ipython, los gráficos aparecerán automáticamente si la primera línea es:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb4-1" title="1"><span class="op">%</span>matplotlib inline</a></code></pre></div>
<p>De lo contrario necesitaremos ejecutar:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb5-1" title="1"><span class="co"># [...]</span></a>
<a class="sourceLine" id="cb5-2" title="2">ax.plot(t, y, <span class="st">&#39;g.-&#39;</span>)</a>
<a class="sourceLine" id="cb5-3" title="3">plt.show()  <span class="co"># muestra el gráfico</span></a></code></pre></div>
<p>… para mostrar cada gráfico</p>
</section><section id="section-10" class="slide level2">
<h2></h2>
<h4 id="matplotlib-puede-dibujar-datos-organizados-en"><a href="https://matplotlib.org/">Matplotlib</a> puede dibujar datos organizados en:</h4>
<ul>
<li>Listas</li>
<li>Diccionarios</li>
<li>Arrays (<code>np.array</code>)</li>
<li><code>pandas.DataFrame</code></li>
</ul>
<div class="smaller">
<p>El tipo de datos nativo es <code>np.array</code>.</p>
<p>⚠ El resto puede requerir sanear/homogeneizar los datos ⚠</p>
</div>
</section><section id="section-11" class="slide level2">
<h2></h2>
<div class="smaller">
<p>Para crear una tupla (figura, ejes) usaremos:</p>
</div>
<div class="columns">
<div class="column smaller" style="width:50%;">
<ul>
<li><code>plt.subplots()</code>
<ul>
<li>sin argumentos: crea una figura con 1 area de dibujo</li>
<li>plt.subplots(<code>n</code>, <code>m</code>): crea una figura con varias zonas de dibujo distribuidas en <code>n</code> filas y <code>m</code> columnas</li>
<li>devuelve la figura y todos los ejes</li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb6"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb6-1" title="1">fig, (eje1, eje2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb6-2" title="2"></a>
<a class="sourceLine" id="cb6-3" title="3">eje1.plot(t, y, <span class="st">&#39;g&#39;</span>)</a>
<a class="sourceLine" id="cb6-4" title="4">eje2.plot(t, z)</a></code></pre></div>
<p><img data-src="images/s06/subplots12.png" alt="subplots12" /><br />
</p>
</div>
</div>
</section><section id="section-12" class="slide level2">
<h2></h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="sourceCode" id="cb7"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb7-1" title="1"><span class="co">#####</span></a>
<a class="sourceLine" id="cb7-2" title="2">fig, (eje1, eje2) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb7-3" title="3"><span class="co">#####</span></a>
<a class="sourceLine" id="cb7-4" title="4"></a>
<a class="sourceLine" id="cb7-5" title="5">eje1.plot(t, y, <span class="st">&#39;g&#39;</span>)</a>
<a class="sourceLine" id="cb7-6" title="6">eje2.plot(t, z)</a></code></pre></div>
<p><img data-src="images/s06/subplots12.png" alt="subplots12" /><br />
</p>
</div><div class="column" style="width:50%;">
<div class="sourceCode" id="cb8"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb8-1" title="1"><span class="co">#####</span></a>
<a class="sourceLine" id="cb8-2" title="2">fig, ejes <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb8-3" title="3"><span class="co">#####</span></a>
<a class="sourceLine" id="cb8-4" title="4">    sharex<span class="op">=</span><span class="va">True</span>, figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">10</span>),</a>
<a class="sourceLine" id="cb8-5" title="5">    facecolor<span class="op">=</span><span class="st">&#39;silver&#39;</span>)</a>
<a class="sourceLine" id="cb8-6" title="6">ejes[<span class="dv">0</span>].plot(t, y, <span class="st">&#39;g.&#39;</span>)</a>
<a class="sourceLine" id="cb8-7" title="7">ejes[<span class="dv">1</span>].plot(t, z, <span class="st">&#39;.-&#39;</span>)</a></code></pre></div>
<p><img data-src="images/s06/subplots21.png" alt="subplots21" style="width:60.0%" /><br />
</p>
</div>
</div>
</section><section id="section-13" class="slide level2">
<h2></h2>
<h4 id="plt.subplot"><code>plt.subplot()</code></h4>
<div class="smaller">
<blockquote>
<p><strong>¡Ojo!:</strong> <code>plt.subplot()</code> != <code>plt.subplots()</code></p>
</blockquote>
<ul>
<li>(<code>nrows</code>, <code>ncols</code>, <code>index</code>): crea un eje</li>
<li>devuelve 1 solo eje (al que se haga referencia)</li>
</ul>
<div class="columns">
<div class="column smaller" style="width:50%;">
<div class="sourceCode" id="cb9"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb9-1" title="1">fig <span class="op">=</span> plt.figure(figsize<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb9-2" title="2"></a>
<a class="sourceLine" id="cb9-3" title="3">ax1 <span class="op">=</span> plt.subplot(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb9-4" title="4">ax1.plot(t, y, <span class="st">&#39;gs&#39;</span>)</a>
<a class="sourceLine" id="cb9-5" title="5"></a>
<a class="sourceLine" id="cb9-6" title="6">ax2 <span class="op">=</span> plt.subplot(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">3</span>)</a>
<a class="sourceLine" id="cb9-7" title="7">ax2.hist(y, alpha<span class="op">=</span>.<span class="dv">7</span>)</a>
<a class="sourceLine" id="cb9-8" title="8"></a>
<a class="sourceLine" id="cb9-9" title="9">ax3 <span class="op">=</span> plt.subplot(<span class="dv">2</span>, <span class="dv">2</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb9-10" title="10">ax3.pcolormesh(</a>
<a class="sourceLine" id="cb9-11" title="11">  np.tril(np.random.uniform(size<span class="op">=</span>(<span class="dv">10</span>, <span class="dv">10</span>)),</a>
<a class="sourceLine" id="cb9-12" title="12">          <span class="dv">-1</span>)</a>
<a class="sourceLine" id="cb9-13" title="13">)</a></code></pre></div>
</div><div class="column" style="width:50%;">
<p><img data-src="images/s06/subplot.png" alt="subplot" style="width:75.0%" /><br />
</p>
</div>
</div>
</div>
<aside class="notes">
<h1 id="saltar">SALTAR</h1>
</aside>
</section></section>
<section><section id="integración-con-pandas" class="title-slide slide level1"><h1>Integración con pandas</h1></section><h4 id="visualización-de-datos-con-pandas">Visualización de datos con pandas</h4><section id="section-14" class="slide level2">
<h2></h2>
<div class="smaller">
<ul>
<li><strong>Descargar y abrir <a href="code/s06/visualizacion_con_pandas.ipynb">cuaderno jupyter</a></strong></li>
<li><code>pyplot</code> está (parcialmente) integrado en <a href="https://pandas.pydata.org/">pandas</a></li>
<li>Podemos dibujar directamente desde un dataframe de <a href="https://pandas.pydata.org/">pandas</a></li>
<li>se devuelve un objeto “<em><code>Axes</code></em>” sobre el que poder trabajar
<ul>
<li>no es necesario crear con antelación la figura y los ejes</li>
<li>… aunque suele ser lo recomendable</li>
</ul></li>
</ul>
<div class="columns">
<div class="column" style="width:60%;">
<div class="sourceCode" id="cb10"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb10-1" title="1"><span class="co"># Crea la figura y los ejes</span></a>
<a class="sourceLine" id="cb10-2" title="2">fig, ax <span class="op">=</span> plt.subplots()</a>
<a class="sourceLine" id="cb10-3" title="3"></a>
<a class="sourceLine" id="cb10-4" title="4"><span class="co"># siempre se devuelve referencia al eje</span></a>
<a class="sourceLine" id="cb10-5" title="5">ax2 <span class="op">=</span> df.plot.scatter(</a>
<a class="sourceLine" id="cb10-6" title="6">    <span class="st">&#39;a&#39;</span>, <span class="st">&#39;b&#39;</span>, c<span class="op">=</span><span class="st">&#39;c&#39;</span>, s<span class="op">=</span>df[<span class="st">&#39;d&#39;</span>],</a>
<a class="sourceLine" id="cb10-7" title="7">    colormap<span class="op">=</span><span class="st">&#39;viridis&#39;</span>, alpha<span class="op">=</span>.<span class="dv">5</span>,</a>
<a class="sourceLine" id="cb10-8" title="8">    title<span class="op">=</span><span class="st">&#39;Scatter con pandas&#39;</span>, rot<span class="op">=</span><span class="st">&#39;vertical&#39;</span>,</a>
<a class="sourceLine" id="cb10-9" title="9">    ax <span class="op">=</span> ax<span class="op">;</span></a>
<a class="sourceLine" id="cb10-10" title="10">)</a>
<a class="sourceLine" id="cb10-11" title="11"></a>
<a class="sourceLine" id="cb10-12" title="12">ax.annotate(</a>
<a class="sourceLine" id="cb10-13" title="13">    <span class="st">&#39;Defecto&#39;</span>, xy<span class="op">=</span>(<span class="fl">1.9</span>, <span class="dv">-17</span>),</a>
<a class="sourceLine" id="cb10-14" title="14">    xytext<span class="op">=</span>(<span class="dv">2</span>, <span class="dv">-20</span>),</a>
<a class="sourceLine" id="cb10-15" title="15">    arrowprops<span class="op">=</span><span class="bu">dict</span>(facecolor<span class="op">=</span><span class="st">&#39;black&#39;</span>, shrink<span class="op">=</span><span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb10-16" title="16">)</a>
<a class="sourceLine" id="cb10-17" title="17"></a>
<a class="sourceLine" id="cb10-18" title="18">ax2 <span class="op">==</span> ax  <span class="co"># dos referencias al mismo objeto</span></a>
<a class="sourceLine" id="cb10-19" title="19"><span class="va">True</span></a></code></pre></div>
</div><div class="column" style="width:40%;">
<p><img data-src="images/s06/pd_scatter.png" alt="pd_scatter" /><br />
</p>
</div>
</div>
</div>
</section><section id="section-15" class="slide level2">
<h2></h2>
<p>Sintaxis</p>
<p><img data-src="images/s06/pandas_plot.png" alt="pandas_plot" /><br />
</p>
</section><section id="section-16" class="slide level2">
<h2></h2>
<p>Usar <a href="https://pandas.pydata.org/">pandas</a> es conveniente y mucho más sencillo:</p>
<div class="smaller">
<div class="sourceCode" id="cb11"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb11-1" title="1">provincias <span class="op">=</span> [<span class="st">&#39;Cantabria&#39;</span>, <span class="st">&#39;Madrid&#39;</span>, <span class="st">&#39;Murcia&#39;</span>, <span class="st">&#39;León&#39;, &#39;</span>Albacete<span class="st">&#39;]</span></a>
<a class="sourceLine" id="cb11-2" title="2"><span class="st">index = np.arange(len(provincias)) + 0.3</span></a>
<a class="sourceLine" id="cb11-3" title="3"></a>
<a class="sourceLine" id="cb11-4" title="4"><span class="st">y_offset = np.zeros(len(marriages.Total.columns))</span></a>
<a class="sourceLine" id="cb11-5" title="5"><span class="st">cell_text = []</span></a>
<a class="sourceLine" id="cb11-6" title="6"></a>
<a class="sourceLine" id="cb11-7" title="7"><span class="st">for row in marriages.Total.columns:</span></a>
<a class="sourceLine" id="cb11-8" title="8"><span class="st">    _data = marriages.Total.loc[provincias, row]</span></a>
<a class="sourceLine" id="cb11-9" title="9"><span class="st">    plt.bar(index, _data, bottom=y_offset, width=0.5)</span></a>
<a class="sourceLine" id="cb11-10" title="10"><span class="st">    y_offset = y_offset + _data</span></a>
<a class="sourceLine" id="cb11-11" title="11"><span class="st">    cell_text.append([&quot;</span><span class="sc">%1.1f</span><span class="st">&quot; % (x / 1000.0) for x in y_offset])</span></a>
<a class="sourceLine" id="cb11-12" title="12"><span class="st">cell_text.reverse()</span></a>
<a class="sourceLine" id="cb11-13" title="13"><span class="st">tabla = plt.table(cellText=cell_text,</span></a>
<a class="sourceLine" id="cb11-14" title="14"><span class="st">                  rowLabels=marriages.Total.columns,</span></a>
<a class="sourceLine" id="cb11-15" title="15"><span class="st">                  colLabels=provincias,</span></a>
<a class="sourceLine" id="cb11-16" title="16"><span class="st">                  loc=&#39;</span>bottom<span class="st">&#39;)</span></a>
<a class="sourceLine" id="cb11-17" title="17"><span class="st">plt.legend(marriages.Total.columns)</span></a>
<a class="sourceLine" id="cb11-18" title="18"><span class="st">plt.title(&#39;</span>Total Matrimonios en <span class="dv">2017</span><span class="st">&#39;)</span></a></code></pre></div>
<p>con <code>pandas</code>, lo equivalente sería:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb12-1" title="1">provincias <span class="op">=</span> [<span class="st">&#39;Cantabria&#39;</span>, <span class="st">&#39;Madrid&#39;</span>, <span class="st">&#39;Murcia&#39;</span>, <span class="st">&#39;León&#39;, &#39;</span>Albacete<span class="st">&#39;]</span></a>
<a class="sourceLine" id="cb12-2" title="2"><span class="st">df = ax.Total.loc[provincias]</span></a>
<a class="sourceLine" id="cb12-3" title="3"><span class="st">ax = df.plot.bar(stacked=True,</span></a>
<a class="sourceLine" id="cb12-4" title="4"><span class="st">    table=True, title=&#39;</span>Total Matrimonios en <span class="dv">2017</span><span class="st">&#39;)</span></a></code></pre></div>
</div>
</section><section id="section-17" class="slide level2">
<h2></h2>
<div class="smaller">
<div class="sourceCode" id="cb13"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb13-1" title="1">provincias <span class="op">=</span> [<span class="st">&#39;Cantabria&#39;</span>, <span class="st">&#39;Madrid&#39;</span>, <span class="st">&#39;Murcia&#39;</span>, <span class="st">&#39;León&#39;, &#39;</span>Albacete<span class="st">&#39;]</span></a>
<a class="sourceLine" id="cb13-2" title="2"><span class="st">df = ax.Total.loc[provincias]</span></a>
<a class="sourceLine" id="cb13-3" title="3"><span class="st">ax = df.plot.bar(</span></a>
<a class="sourceLine" id="cb13-4" title="4"><span class="st">    stacked=True,</span></a>
<a class="sourceLine" id="cb13-5" title="5"><span class="st">    table=True,</span></a>
<a class="sourceLine" id="cb13-6" title="6"><span class="st">    title=&#39;</span>Total Matrimonios en <span class="dv">2017</span><span class="st">&#39;</span></a>
<a class="sourceLine" id="cb13-7" title="7"><span class="st">)</span></a></code></pre></div>
</div>
<p><img data-src="images/s06/barplot_stacked.png" alt="barplot_stacked" style="width:70.0%" /><br />
</p>
</section><section id="section-18" class="slide level2">
<h2></h2>
<ul>
<li>Generalmente las opciones más usadas en cada tipo de gráfico (título, ejes y posición, color, tamaño de línea, …) son directamente accesibles desde <code>pandas.DataFrame.plot()</code>.</li>
<li>Para el resto, usar <code>matplotlib</code> sobre el objecto “Axes”:</li>
</ul>
<div class="sourceCode" id="cb14"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb14-1" title="1">ax <span class="op">=</span> df.plot(kind<span class="op">=</span><span class="st">&#39;scatter&#39;</span>, ...)  <span class="co"># df.plot.scatter(...)</span></a>
<a class="sourceLine" id="cb14-2" title="2">ax.set_yticks(rotation<span class="op">=</span><span class="st">&#39;vertical&#39;</span>)</a></code></pre></div>
<aside class="notes">
<p>_Hacer fácil las tareas sencillas y posibles/viables las complicadas__</p>
</aside>
</section></section>
<section><section id="otros-tipos-de-gráficos-disponibles" class="title-slide slide level1"><h1>Otros tipos de gráficos disponibles</h1></section><h4 id="otros-tipos-de-gráficos-con-pandas">Otros tipos de gráficos con <code>pandas</code></h4><section id="section-19" class="slide level2">
<h2></h2>
<div class="smaller">
<ul>
<li>Gráfico de dispersión (<code>scatter</code>)</li>
</ul>
<div class="sourceCode" id="cb15"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb15-1" title="1">df.plot.scatter(</a>
<a class="sourceLine" id="cb15-2" title="2">    x<span class="op">=</span><span class="st">&#39;a&#39;</span>, y<span class="op">=</span><span class="st">&#39;b&#39;</span>,  <span class="co"># nombres de las columnas del dataframe</span></a>
<a class="sourceLine" id="cb15-3" title="3">    c<span class="op">=</span><span class="st">&#39;c&#39;</span>,  <span class="co"># columna con datos de color</span></a>
<a class="sourceLine" id="cb15-4" title="4">    s<span class="op">=</span>df[<span class="st">&#39;d&#39;</span>],  <span class="co"># tamaño de los puntos</span></a>
<a class="sourceLine" id="cb15-5" title="5">    colormap<span class="op">=</span><span class="st">&#39;viridis&#39;</span>,  <span class="co"># paleta de color</span></a>
<a class="sourceLine" id="cb15-6" title="6">    alpha<span class="op">=</span>.<span class="dv">5</span>,  <span class="co"># transparencia</span></a>
<a class="sourceLine" id="cb15-7" title="7">    title<span class="op">=</span><span class="st">&#39;Scatter con pandas&#39;</span>,  <span class="co"># título</span></a>
<a class="sourceLine" id="cb15-8" title="8">    rot<span class="op">=</span><span class="st">&#39;vertical&#39;</span>,  <span class="co"># rotar etiquetas del eje &#39;x&#39;</span></a>
<a class="sourceLine" id="cb15-9" title="9">)</a></code></pre></div>
<p><img data-src="images/s06/pd_scatter.png" alt="pd_scatter" /><br />
</p>
</div>
</section><section id="section-20" class="slide level2">
<h2></h2>
<ul>
<li>Histograma</li>
</ul>
<div class="sourceCode" id="cb16"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb16-1" title="1">df.hist(sharey<span class="op">=</span><span class="va">True</span>, log<span class="op">=</span><span class="va">True</span>)</a></code></pre></div>
<p><img data-src="images/s06/pd_hist.png" alt="pd_hist" style="width:50.0%" /><br />
</p>
</section><section id="section-21" class="slide level2">
<h2></h2>
<ul>
<li><strong>Series temporales</strong>: aquellos donde el índice del <code>DataFrame</code> tiene propiedades de “índice temporal” (<code>DateTimeIndex</code>)</li>
</ul>
<p><img data-src="images/s06/ts.png" alt="ts" /><br />
</p>
</section><section id="section-22" class="slide level2">
<h2></h2>
<ul>
<li>Boxplots</li>
</ul>
<div class="smaller">

</div>
<div class="columns">
<div class="column smaller" style="width:40%;">
<div class="sourceCode" id="cb17"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb17-1" title="1">df.boxplot(by<span class="op">=</span><span class="st">&#39;origin&#39;</span>, ax<span class="op">=</span>ax)</a></code></pre></div>
</div><div class="column" style="width:60%;">
<p><img data-src="images/s06/pd_boxplot.png" alt="pd_boxplot" /><br />
</p>
</div>
</div>
<p>:::</p>
</section><section id="section-23" class="slide level2">
<h2></h2>
<ul>
<li>Área</li>
</ul>
<div class="smaller">
<div class="columns">
<div class="column smaller" style="width:60%;">
<div class="sourceCode" id="cb18"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb18-1" title="1">np.random.seed(<span class="dv">0</span>)</a>
<a class="sourceLine" id="cb18-2" title="2">N <span class="op">=</span> <span class="dv">5</span></a>
<a class="sourceLine" id="cb18-3" title="3">data <span class="op">=</span> pd.DataFrame(</a>
<a class="sourceLine" id="cb18-4" title="4">    {<span class="st">&#39;Grupo A&#39;</span>: np.random.randint(<span class="dv">1</span>, <span class="dv">20</span>, N),</a>
<a class="sourceLine" id="cb18-5" title="5">     <span class="st">&#39;Grupo B&#39;</span>: np.random.randint(<span class="dv">1</span>, <span class="dv">20</span>, N),</a>
<a class="sourceLine" id="cb18-6" title="6">     <span class="st">&#39;Grupo C&#39;</span>: np.random.randint(<span class="dv">1</span>, <span class="dv">20</span>, N)},</a>
<a class="sourceLine" id="cb18-7" title="7">    index<span class="op">=</span><span class="bu">range</span>(<span class="dv">1</span>, N<span class="op">+</span><span class="dv">1</span>)</a>
<a class="sourceLine" id="cb18-8" title="8">)</a>
<a class="sourceLine" id="cb18-9" title="9"></a>
<a class="sourceLine" id="cb18-10" title="10">ax <span class="op">=</span> plt.subplot(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">1</span>)</a>
<a class="sourceLine" id="cb18-11" title="11">data.plot.area(</a>
<a class="sourceLine" id="cb18-12" title="12">    stacked<span class="op">=</span><span class="va">False</span>,</a>
<a class="sourceLine" id="cb18-13" title="13">    alpha<span class="op">=</span>.<span class="dv">6</span>,</a>
<a class="sourceLine" id="cb18-14" title="14">    title<span class="op">=</span><span class="st">&#39;Gráfico de área&#39;</span>,</a>
<a class="sourceLine" id="cb18-15" title="15">    ax<span class="op">=</span>ax)</a>
<a class="sourceLine" id="cb18-16" title="16"></a>
<a class="sourceLine" id="cb18-17" title="17">ax <span class="op">=</span> plt.subplot(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">2</span>)</a>
<a class="sourceLine" id="cb18-18" title="18">data.plot.area(</a>
<a class="sourceLine" id="cb18-19" title="19">    title<span class="op">=</span><span class="st">&#39;Gráfico de área (apilado)&#39;</span>,</a>
<a class="sourceLine" id="cb18-20" title="20">    ax<span class="op">=</span>ax)</a></code></pre></div>
</div><div class="column" style="width:40%;">
<p><img data-src="images/s06/pd_area.png" alt="pd_area" /><br />
</p>
</div>
</div>
</div>
</section><section id="section-24" class="slide level2">
<h2></h2>
<ul>
<li>Circular (<code>pie chart</code>)</li>
</ul>
<div class="smaller">

</div>
<div class="columns">
<div class="column smaller" style="width:50%;">
<div class="sourceCode" id="cb19"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb19-1" title="1">ax <span class="op">=</span> df1.plot.pie(cmap<span class="op">=</span>cmap,</a>
<a class="sourceLine" id="cb19-2" title="2">                  title<span class="op">=</span><span class="st">&#39;Cilindros&#39;</span>,</a>
<a class="sourceLine" id="cb19-3" title="3">                  autopct<span class="op">=</span><span class="st">&#39;</span><span class="sc">%.2f</span><span class="st">&#39;</span>, ax<span class="op">=</span>ax)</a></code></pre></div>
</div><div class="column" style="width:50%;">
<p><img data-src="images/s06/pd_pie.png" alt="pd_pie" /><br />
</p>
</div>
</div>
</section></section>
<section><section id="parámetros-opcionales" class="title-slide slide level1"><h1>Parámetros opcionales</h1></section><h4 id="parámetros-opcionales-en-pandas">Parámetros opcionales en <code>pandas</code></h4><section id="section-25" class="slide level2">
<h2></h2>
<h3 id="pd.dataframe.plot"><code>pd.DataFrame.plot()</code></h3>
<p>Es posible pasar argumentos para realizar personalizaciones rápidas.</p>
<ul>
<li>Existen opciones específicas para cada tipo de visualización</li>
<li>También hay opciones <strong>comunes</strong> a todos ellos</li>
</ul>
</section><section id="section-26" class="slide level2">
<h2></h2>
<ul>
<li>Además, podremos usar las primitivas de <code>matplotlib</code>, bien como argumentos adicionales o sobre los ejes</li>
</ul>
<p><img data-src="images/s06/pandas_plot.png" alt="pandas_plot" /><br />
</p>
</section><section id="nan" class="slide level2">
<h2>NaN</h2>
<div class="smaller">
<ul>
<li>Por defecto ignora los datos ausentes (<code>NaN</code>)</li>
<li>Podemos “rellenar los huecos”: <code>df.fillna()</code>
<ul>
<li>propagando el último valor</li>
<li>o con valores preestablecidos</li>
</ul></li>
<li>O interpolar <code>df.interpolate()</code></li>
</ul>
<p><img data-src="images/s06/pd_interp.png" alt="pd_interp" style="width:40.0%" /><br />
</p>
</div>
</section></section>
<section><section id="interactivopráctico" class="title-slide slide level1"><h1>Interactivo/Práctico</h1></section><h4 id="caso-práctico">Caso práctico</h4><section id="section-27" class="slide level2">
<h2></h2>
<ul>
<li>Descargar <a href="code/s06/practica.ipynb">cuaderno jupyter</a></li>
<li>Abrirlo con <code>jupyter notebook</code></li>
<li>Utiliza las celdas vacías para las respuestas, pruebas, etc.</li>
</ul>
</section><section id="section-28" class="slide level2">
<h2></h2>
<ol type="1">
<li><code>ax</code>: ejes sobre los que dibujar</li>
</ol>
<p><img data-src="images/s06/practica_01.png" alt="practica_01" /><br />
</p>
</section><section id="section-29" class="slide level2">
<h2></h2>
<p>1.2. Barras apiladas (<code>stacked</code>)</p>
<p><img data-src="images/s06/practica_01b.png" alt="practica_01b" /><br />
</p>
</section><section id="section-30" class="slide level2">
<h2></h2>
<div class="smaller">
<ol start="2" type="1">
<li><code>subplots [True|False]</code>: subplot para cada columna dibujada
<ul>
<li><code>layout</code>: (<code>n_filas</code>, <code>n_columnas</code>), opcional con <code>subplot=True</code></li>
</ul></li>
</ol>
<p><img data-src="images/s06/practica_02.png" alt="practica_02" /><br />
</p>
</div>
</section><section id="section-31" class="slide level2">
<h2></h2>
<p>2.2. <code>layout</code> como parámetro de <code>plt.subplots()</code></p>
<p><img data-src="images/s06/practica_02b.png" alt="practica_02b" /><br />
</p>
</section><section id="section-32" class="slide level2">
<h2></h2>
<ol start="3" type="1">
<li><code>sharex/sharey</code>: compartir ejes (subplots)</li>
</ol>
<p><img data-src="images/s06/practica_03.png" alt="practica_03" /><br />
</p>
</section><section id="section-33" class="slide level2">
<h2></h2>
<ol start="4" type="1">
<li><code>title</code>:
<ul>
<li><code>str</code>: título de la figura</li>
<li><code>list(str)</code>: título de cada subplot</li>
</ul></li>
</ol>
<p><img data-src="images/s06/practica_04.png" alt="practica_04" /><br />
</p>
</section><section id="section-34" class="slide level2">
<h2></h2>
<ol start="5" type="1">
<li><code>figsize</code>: tamaño de la figura</li>
</ol>
<p><img data-src="images/s06/practica_05.png" alt="practica_05" /><br />
</p>
</section><section id="section-35" class="slide level2">
<h2></h2>
<ol start="6" type="1">
<li><code>stacked [True|False]</code>: apilar datos</li>
</ol>
<p><img data-src="images/s06/practica_06.png" alt="practica_06" /><br />
</p>
</section><section id="section-36" class="slide level2">
<h2></h2>
<ol start="7" type="1">
<li><code>grid [True|False]</code>: dibujar cuadrícula</li>
</ol>
<p><img data-src="images/s06/practica_07.png" alt="practica_07" /><br />
</p>
</section><section id="section-37" class="slide level2">
<h2></h2>
<ol start="8" type="1">
<li><code>rot</code>: <code>'horizontal'</code>, <code>'vertical'</code>, o número (en grados)</li>
</ol>
<p><img data-src="images/s06/practica_08.png" alt="practica_08" /><br />
</p>
</section><section id="section-38" class="slide level2">
<h2></h2>
<ol start="9" type="1">
<li><code>xlim, ylim</code>: tuplas <code>(lo, hi)</code> para delimitar visualización</li>
</ol>
<p><img data-src="images/s06/practica_09.png" alt="practica_09" /><br />
</p>
</section><section id="section-39" class="slide level2">
<h2></h2>
<ol start="10" type="1">
<li><code>colormap</code>: mapa de colores (<code>plt.colormaps()</code>)</li>
</ol>
<p><img data-src="images/s06/practica_10.png" alt="practica_10" /><br />
</p>
</section><section id="section-40" class="slide level2">
<h2></h2>
<ol start="11" type="1">
<li><code>secondary_y</code>: segundo eje de ordenadas</li>
</ol>
<p><img data-src="images/s06/practica_11.png" alt="practica_11" /><br />
</p>
</section><section id="section-41" class="slide level2">
<h2></h2>
<ol start="12" type="1">
<li><code>table [True|False]</code>: mostrar tabla bajo el gráfico</li>
</ol>
<p><img data-src="images/s06/practica_12.png" alt="practica_12" /><br />
</p>
<!-- ##
**BONUS**
Generar un gráfico circular con estilo `xkcd`

![practica_99]\

 -->
</section></section>
<section><section id="parámetros-de-visualización-con-pyplot" class="title-slide slide level1"><h1>Parámetros de visualización con <code>pyplot</code></h1></section><h4 id="parámetros-de-visualización-con-pyplot-1">Parámetros de visualización con <code>pyplot</code></h4><section id="section-42" class="slide level2">
<h2></h2>
<ul>
<li>Descargar <a href="code/s06/pyplot_ii.ipynb">cuaderno jupyter</a></li>
<li>Abrirlo con <code>jupyter notebook</code></li>
<li>Ejecutar paso a paso de la siguiente sección</li>
</ul>
</section><section id="colorestilo-de-línea" class="slide level2">
<h2>Color/estilo de línea</h2>
<div class="smaller">
<p>El color de línea para un gráfico individual se puede controlar mediante una cadena de texto que defina color+estilo+marcador (p.e. <code>'r--'</code>), en cualquier orden, todos opcionales:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb20-1" title="1">colors <span class="op">=</span> {<span class="st">&#39;b&#39;</span>: <span class="st">&#39;blue&#39;</span>, <span class="st">&#39;g&#39;</span>: <span class="st">&#39;green&#39;</span>, <span class="st">&#39;r&#39;</span>: <span class="st">&#39;red&#39;</span>, <span class="st">&#39;c&#39;</span>: <span class="st">&#39;cyan&#39;</span>, <span class="st">&#39;m&#39;</span>: <span class="st">&#39;magenta&#39;</span>,</a>
<a class="sourceLine" id="cb20-2" title="2">          <span class="st">&#39;y&#39;</span>: <span class="st">&#39;yellow&#39;</span>, <span class="st">&#39;k&#39;</span>: <span class="st">&#39;black&#39;</span>, <span class="st">&#39;w&#39;</span>: <span class="st">&#39;white&#39;</span>}</a>
<a class="sourceLine" id="cb20-3" title="3"></a>
<a class="sourceLine" id="cb20-4" title="4">lineStyles <span class="op">=</span> {<span class="st">&#39;-&#39;</span>: <span class="st">&#39;_draw_solid&#39;</span>, <span class="st">&#39;--&#39;</span>: <span class="st">&#39;_draw_dashed&#39;</span>, <span class="st">&#39;-.&#39;</span>: <span class="st">&#39;_draw_dash_dot&#39;</span>,</a>
<a class="sourceLine" id="cb20-5" title="5">              <span class="st">&#39;:&#39;</span>: <span class="st">&#39;_draw_dotted&#39;</span>, <span class="st">&#39;None&#39;</span>: <span class="st">&#39;_draw_nothing&#39;</span>,</a>
<a class="sourceLine" id="cb20-6" title="6">              <span class="st">&#39; &#39;</span>: <span class="st">&#39;_draw_nothing&#39;</span>, <span class="st">&#39;&#39;</span>: <span class="st">&#39;_draw_nothing&#39;</span>}</a>
<a class="sourceLine" id="cb20-7" title="7"></a>
<a class="sourceLine" id="cb20-8" title="8">markers <span class="op">=</span> {</a>
<a class="sourceLine" id="cb20-9" title="9">    <span class="st">&#39;.&#39;</span>: <span class="st">&#39;point&#39;</span>, <span class="st">&#39;,&#39;</span>: <span class="st">&#39;pixel&#39;</span>, <span class="st">&#39;o&#39;</span>: <span class="st">&#39;circle&#39;</span>, <span class="st">&#39;v&#39;</span>: <span class="st">&#39;triangle_down&#39;</span>,</a>
<a class="sourceLine" id="cb20-10" title="10">    <span class="st">&#39;^&#39;</span>: <span class="st">&#39;triangle_up&#39;</span>, <span class="st">&#39;&lt;&#39;</span>: <span class="st">&#39;triangle_left&#39;</span>, <span class="st">&#39;&gt;&#39;</span>: <span class="st">&#39;triangle_right&#39;</span>,</a>
<a class="sourceLine" id="cb20-11" title="11">    <span class="st">&#39;1&#39;</span>: <span class="st">&#39;tri_down&#39;</span>, <span class="st">&#39;2&#39;</span>: <span class="st">&#39;tri_up&#39;</span>, <span class="st">&#39;3&#39;</span>: <span class="st">&#39;tri_left&#39;</span>, <span class="st">&#39;4&#39;</span>: <span class="st">&#39;tri_right&#39;</span>,</a>
<a class="sourceLine" id="cb20-12" title="12">    <span class="st">&#39;8&#39;</span>: <span class="st">&#39;octagon&#39;</span>, <span class="st">&#39;s&#39;</span>: <span class="st">&#39;square&#39;</span>, <span class="st">&#39;p&#39;</span>: <span class="st">&#39;pentagon&#39;</span>, <span class="st">&#39;*&#39;</span>: <span class="st">&#39;star&#39;</span>,</a>
<a class="sourceLine" id="cb20-13" title="13">    <span class="st">&#39;h&#39;</span>: <span class="st">&#39;hexagon1&#39;</span>, <span class="st">&#39;H&#39;</span>: <span class="st">&#39;hexagon2&#39;</span>, <span class="st">&#39;+&#39;</span>: <span class="st">&#39;plus&#39;</span>, <span class="st">&#39;x&#39;</span>: <span class="st">&#39;x&#39;</span>, <span class="st">&#39;D&#39;</span>: <span class="st">&#39;diamond&#39;</span>,</a>
<a class="sourceLine" id="cb20-14" title="14">    <span class="st">&#39;d&#39;</span>: <span class="st">&#39;thin_diamond&#39;</span>, <span class="st">&#39;|&#39;</span>: <span class="st">&#39;vline&#39;</span>, <span class="st">&#39;_&#39;</span>: <span class="st">&#39;hline&#39;</span>, <span class="st">&#39;P&#39;</span>: <span class="st">&#39;plus_filled&#39;</span>,</a>
<a class="sourceLine" id="cb20-15" title="15">    <span class="st">&#39;X&#39;</span>: <span class="st">&#39;x_filled&#39;</span>, <span class="dv">0</span>: <span class="st">&#39;tickleft&#39;</span>, <span class="dv">1</span>: <span class="st">&#39;tickright&#39;</span>, <span class="dv">2</span>: <span class="st">&#39;tickup&#39;</span>, <span class="dv">3</span>: <span class="st">&#39;tickdown&#39;</span>,</a>
<a class="sourceLine" id="cb20-16" title="16">    <span class="dv">4</span>: <span class="st">&#39;caretleft&#39;</span>, <span class="dv">5</span>: <span class="st">&#39;caretright&#39;</span>, <span class="dv">6</span>: <span class="st">&#39;caretup&#39;</span>, <span class="dv">7</span>: <span class="st">&#39;caretdown&#39;</span>,</a>
<a class="sourceLine" id="cb20-17" title="17">    <span class="dv">8</span>: <span class="st">&#39;caretleftbase&#39;</span>, <span class="dv">9</span>: <span class="st">&#39;caretrightbase&#39;</span>, <span class="dv">10</span>: <span class="st">&#39;caretupbase&#39;</span>,</a>
<a class="sourceLine" id="cb20-18" title="18">    <span class="dv">11</span>: <span class="st">&#39;caretdownbase&#39;</span>, <span class="st">&#39;None&#39;</span>: <span class="st">&#39;nothing&#39;</span>, <span class="va">None</span>: <span class="st">&#39;nothing&#39;</span>, <span class="st">&#39; &#39;</span>: <span class="st">&#39;nothing&#39;</span>,</a>
<a class="sourceLine" id="cb20-19" title="19">    <span class="st">&#39;&#39;</span>: <span class="st">&#39;nothing&#39;</span></a>
<a class="sourceLine" id="cb20-20" title="20">}</a></code></pre></div>
</div>
</section><section id="section-43" class="slide level2">
<h2></h2>
<p>Color/estilo de línea</p>
<div class="columns">
<div class="column smaller" style="width:60%;">
<div class="sourceCode" id="cb21"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb21-1" title="1">N <span class="op">=</span> <span class="dv">50</span></a>
<a class="sourceLine" id="cb21-2" title="2">np.random.seed(<span class="dv">4873</span>)</a>
<a class="sourceLine" id="cb21-3" title="3"></a>
<a class="sourceLine" id="cb21-4" title="4">x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, N)</a>
<a class="sourceLine" id="cb21-5" title="5">k <span class="op">=</span> <span class="fl">0.8</span></a>
<a class="sourceLine" id="cb21-6" title="6">y <span class="op">=</span> k <span class="op">+</span> np.sin(x) <span class="op">*</span> np.random.randn(N)</a>
<a class="sourceLine" id="cb21-7" title="7"></a>
<a class="sourceLine" id="cb21-8" title="8">(fig, ax) <span class="op">=</span> plt.subplots(<span class="dv">1</span>)</a>
<a class="sourceLine" id="cb21-9" title="9"></a>
<a class="sourceLine" id="cb21-10" title="10"><span class="co">#####</span></a>
<a class="sourceLine" id="cb21-11" title="11">ax.errorbar(x, y, yerr<span class="op">=</span>k, fmt<span class="op">=</span><span class="st">&#39;.r&#39;</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb21-12" title="12">ax.plot(x, <span class="dv">1</span> <span class="op">+</span> np.cos(np.pi<span class="op">*</span>x), <span class="st">&#39;--g&#39;</span>)</a>
<a class="sourceLine" id="cb21-13" title="13">ax.plot(x, x<span class="op">/</span><span class="dv">5</span>, <span class="st">&#39;b&#39;</span>)</a>
<a class="sourceLine" id="cb21-14" title="14"><span class="co">#####</span></a></code></pre></div>
</div><div class="column" style="width:40%;">
<p><img data-src="images/s06/color_linea.png" alt="color_linea" /><br />
</p>
</div>
</div>
</section><section id="section-44" class="slide level2">
<h2></h2>
<p>xticks/yticks</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb22-1" title="1">plt.yticks(rotation<span class="op">=</span><span class="st">&#39;vertical&#39;</span>)</a>
<a class="sourceLine" id="cb22-2" title="2">plt.xticks(rotation<span class="op">=</span><span class="dv">20</span>)  <span class="co"># 20 grados en sentido antihorario</span></a></code></pre></div>
<p><img data-src="images/s06/tick_rotation.png" alt="tick_rotation" style="width:50.0%" /><br />
</p>
</section><section id="section-45" class="slide level2">
<h2></h2>
<div class="smaller">
<p>Títulos, etiquetas y anotaciones</p>
<p><img data-src="images/s06/titulos.png" alt="titulos" style="width:45.0%" /><br />
</p>
<div class="columns">
<div class="column" style="width:40%;">
<pre><code>Título de la figura ---------&gt;
 
Título del subplot (Axes) ---&gt;
Título de cada eje (Axis) ---&gt;

Anotaciones -----------------&gt;


</code></pre>
</div><div class="column" style="width:60%;">
<div class="sourceCode" id="cb24"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb24-1" title="1">fig.suptitle(<span class="st">&#39;Niveles de alcohol y flavonoides&#39;</span>,</a>
<a class="sourceLine" id="cb24-2" title="2">             <span class="st">&#39;(muestra de 178 vinos)&#39;</span>)</a>
<a class="sourceLine" id="cb24-3" title="3">ax.set_title(<span class="st">&#39;Vinos de 3 clases&#39;</span>)</a>
<a class="sourceLine" id="cb24-4" title="4">ax.set_xlabel(<span class="st">&#39;Alcohol (°)&#39;</span>)</a>
<a class="sourceLine" id="cb24-5" title="5">ax.set_ylabel(<span class="st">&#39;Flavonoides (ppm)&#39;</span>)</a>
<a class="sourceLine" id="cb24-6" title="6">ax.annotate(</a>
<a class="sourceLine" id="cb24-7" title="7">    <span class="st">&#39;Viña Arcada&#39;</span>, xy<span class="op">=</span>(<span class="fl">11.8</span>, <span class="dv">1</span>), xytext<span class="op">=</span>(<span class="dv">11</span>, <span class="fl">.5</span>),</a>
<a class="sourceLine" id="cb24-8" title="8">    arrowprops<span class="op">=</span><span class="bu">dict</span>(facecolor<span class="op">=</span><span class="st">&#39;black&#39;</span>, shrink<span class="op">=</span><span class="fl">0.05</span>)</a>
<a class="sourceLine" id="cb24-9" title="9">)</a></code></pre></div>
</div>
</div>
</div>
</section><section id="section-46" class="slide level2">
<h2></h2>
<p>Leyenda</p>
<div class="smaller">
<ul>
<li>Se genera automáticamente según datos inferidos de las etiquetas</li>
</ul>
<div class="columns">
<div class="column smaller" style="width:40%;">
<div class="sourceCode" id="cb25"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb25-1" title="1">(line1, ) <span class="op">=</span> ax.plot([<span class="fl">1.5</span>, <span class="dv">2</span>, <span class="dv">3</span>],</a>
<a class="sourceLine" id="cb25-2" title="2">                    label<span class="op">=</span><span class="st">&#39;IPC&#39;</span>)</a>
<a class="sourceLine" id="cb25-3" title="3">(line2, ) <span class="op">=</span> ax.plot([<span class="dv">1</span>, <span class="fl">1.2</span>, <span class="fl">1.3</span>],</a>
<a class="sourceLine" id="cb25-4" title="4">                    label<span class="op">=</span><span class="st">&#39;Salarios&#39;</span>)</a>
<a class="sourceLine" id="cb25-5" title="5">ax.legend(loc<span class="op">=</span><span class="st">&#39;upper left&#39;</span>)</a></code></pre></div>
<p><code>loc</code>: define dónde emplazar la leyenda</p>
<blockquote>
<p><strong>best</strong>, upper right, upper left, lower left, lower right, right, center left, center right, lower center, upper center, center</p>
</blockquote>
</div><div class="column" style="width:60%;">
<p><img data-src="images/s06/legend.png" alt="legend" /><br />
</p>
</div>
</div>
</div>
<p>:::</p>
</section></section>
<section><section id="estilos" class="title-slide slide level1"><h1>Estilos</h1></section><h4 id="estilos-1">Estilos</h4><section id="section-47" class="slide level2">
<h2></h2>
<div class="smaller">
<div>
<ul>
<li class="fragment">Aplican a todos los gráficos generados</li>
<li class="fragment">Estilo por defecto en <code>matplotlib.rcParams</code>
<ul>
<li class="fragment">pueden modificarse dinámicamente</li>
</ul></li>
<li class="fragment"><p>Podemos cambiar a estilos preconfigurados:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb26-1" title="1"><span class="bu">print</span>(plt.style.available)</a>
<a class="sourceLine" id="cb26-2" title="2">plt.style.use(<span class="st">&#39;ggplot&#39;</span>)</a></code></pre></div></li>
<li class="fragment"><p>y/o modificar parámetros (<code>plt.rcParams</code>) individualmente</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb27-1" title="1">plt.rcParams[<span class="st">&quot;figure.figsize&quot;</span>] <span class="op">=</span> (<span class="fl">20.0</span>, <span class="fl">15.0</span>)</a>
<a class="sourceLine" id="cb27-2" title="2">plt.rcParams[<span class="st">&#39;font.family&#39;</span>] <span class="op">=</span> [<span class="st">&#39;monospace&#39;</span>]</a></code></pre></div></li>
<li class="fragment">Los cambios aplican a todos los gráficos
<ul>
<li class="fragment"><p>salvo cambio temporal de estilos:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb28-1" title="1"><span class="cf">with</span> plt.style.context((<span class="st">&#39;dark_background&#39;</span>)):</a>
<a class="sourceLine" id="cb28-2" title="2">    plt.plot(np.sin(np.linspace(<span class="dv">0</span>, <span class="dv">2</span> <span class="op">*</span> np.pi)), <span class="st">&#39;r-o&#39;</span>)</a></code></pre></div></li>
</ul></li>
</ul>
</div>
</div>
</section><section id="otros-estilos" class="slide level2">
<h2>Otros estilos</h2>
<div class="sourceCode" id="cb29"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb29-1" title="1"><span class="cf">with</span> plt.xkcd():</a>
<a class="sourceLine" id="cb29-2" title="2">    ...</a></code></pre></div>
<p><img data-src="images/s06/xkcd.png" alt="xkcd" /><br />
</p>
</section><section id="otros-estilos-1" class="slide level2">
<h2>Otros estilos</h2>
<p>seaborn</p>
<div class="columns">
<div class="column smaller" style="width:40%;">
<div class="sourceCode" id="cb30"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb30-1" title="1"><span class="im">import</span> seaborn <span class="im">as</span> sns</a>
<a class="sourceLine" id="cb30-2" title="2"></a>
<a class="sourceLine" id="cb30-3" title="3">sns.<span class="bu">set</span>()</a>
<a class="sourceLine" id="cb30-4" title="4">sns.set_context(<span class="st">&quot;talk&quot;</span>)</a></code></pre></div>
</div><div class="column" style="width:60%;">
<p><img data-src="images/s06/overlay.png" alt="overlay" /><br />
</p>
</div>
</div>
<p>:::</p>
</section></section>
<section><section id="tipos-de-gráficos-más-importantes-en-pyplot" class="title-slide slide level1"><h1>Tipos de gráficos más importantes en <code>pyplot</code></h1></section><h4 id="tipos-de-gráficos-en-matplotlibpyplot">Tipos de gráficos en <code>matplotlib</code>/<code>pyplot</code></h4><section id="section-48" class="slide level2">
<h2></h2>
<h3 id="lineplot-.plot">Lineplot (<code>.plot()</code>)</h3>
<div class="smaller">
<p>Tipo de gráfico por defecto</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb31-1" title="1">(fix, ax) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">1</span>)  <span class="co"># (n_filas, n_columnas)</span></a>
<a class="sourceLine" id="cb31-2" title="2"></a>
<a class="sourceLine" id="cb31-3" title="3">x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb31-4" title="4">y <span class="op">=</span> np.exp(<span class="op">-</span>x<span class="op">/</span><span class="dv">2</span>) <span class="op">*</span> np.cos(<span class="dv">2</span><span class="op">*</span>np.pi<span class="op">*</span>x)</a>
<a class="sourceLine" id="cb31-5" title="5"></a>
<a class="sourceLine" id="cb31-6" title="6"><span class="co">#####</span></a>
<a class="sourceLine" id="cb31-7" title="7">ax.plot(x, y, <span class="st">&#39;bo&#39;</span>)</a>
<a class="sourceLine" id="cb31-8" title="8"><span class="co">#####</span></a></code></pre></div>
<p><img data-src="images/s06/plot.png" alt="plot" style="width:60.0%" /><br />
</p>
</div>
</section><section id="section-49" class="slide level2">
<h2></h2>
<div class="smaller">
<p>Dos gráficos al mismo tiempo:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb32-1" title="1">(fig, ax) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">1</span>)  <span class="co"># (n_filas, n_columnas)</span></a>
<a class="sourceLine" id="cb32-2" title="2"></a>
<a class="sourceLine" id="cb32-3" title="3">x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb32-4" title="4">y1 <span class="op">=</span> np.exp(<span class="op">-</span>x <span class="op">/</span> <span class="dv">2</span>) <span class="op">*</span> np.cos(<span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> x)</a>
<a class="sourceLine" id="cb32-5" title="5">y2 <span class="op">=</span> np.exp(<span class="op">-</span>x) <span class="op">/</span> <span class="dv">2</span> <span class="op">*</span> np.sin(<span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> x)</a>
<a class="sourceLine" id="cb32-6" title="6"></a>
<a class="sourceLine" id="cb32-7" title="7"><span class="co">#####</span></a>
<a class="sourceLine" id="cb32-8" title="8">ax.plot(x, y1, <span class="st">&#39;bo&#39;</span>,</a>
<a class="sourceLine" id="cb32-9" title="9">        x, y2, <span class="st">&#39;r--&#39;</span>)</a>
<a class="sourceLine" id="cb32-10" title="10"><span class="co">#####</span></a></code></pre></div>
<p><img data-src="images/s06/plot2.png" alt="plot2" style="width:60.0%" /><br />
</p>
</div>
</section><section id="section-50" class="slide level2">
<h2></h2>
<div class="smaller">
<p>Dos gráficos al mismo tiempo:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb33-1" title="1">(fig, ax) <span class="op">=</span> plt.subplots(<span class="dv">1</span>, <span class="dv">1</span>)  <span class="co"># (n_filas, n_columnas)</span></a>
<a class="sourceLine" id="cb33-2" title="2"></a>
<a class="sourceLine" id="cb33-3" title="3">x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">10</span>, <span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb33-4" title="4">y1 <span class="op">=</span> np.exp(<span class="op">-</span>x <span class="op">/</span> <span class="dv">2</span>) <span class="op">*</span> np.cos(<span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> x)</a>
<a class="sourceLine" id="cb33-5" title="5">y2 <span class="op">=</span> np.exp(<span class="op">-</span>x) <span class="op">/</span> <span class="dv">2</span> <span class="op">*</span> np.sin(<span class="dv">2</span> <span class="op">*</span> np.pi <span class="op">*</span> x)</a>
<a class="sourceLine" id="cb33-6" title="6"></a>
<a class="sourceLine" id="cb33-7" title="7"><span class="co">#####</span></a>
<a class="sourceLine" id="cb33-8" title="8">ax.plot(x, y1, <span class="st">&#39;bo&#39;</span>)</a>
<a class="sourceLine" id="cb33-9" title="9">ax.plot(x, y2, <span class="st">&#39;r--&#39;</span>)  <span class="co"># &lt;-- dibujar sobre el mismo eje</span></a>
<a class="sourceLine" id="cb33-10" title="10"><span class="co">#####</span></a></code></pre></div>
<p><img data-src="images/s06/plot2.png" alt="plot2" style="width:60.0%" /><br />
</p>
</div>
</section><section id="section-51" class="slide level2">
<h2></h2>
<h4 id="gráfico-de-dispersión-scatterplot">Gráfico de dispersión (Scatterplot)</h4>
<div class="columns">
<div class="column smaller" style="width:60%;">
<div class="sourceCode" id="cb34"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb34-1" title="1">N <span class="op">=</span> <span class="dv">75</span></a>
<a class="sourceLine" id="cb34-2" title="2">np.random.seed(<span class="dv">45987230</span>)</a>
<a class="sourceLine" id="cb34-3" title="3"></a>
<a class="sourceLine" id="cb34-4" title="4"></a>
<a class="sourceLine" id="cb34-5" title="5">fig, (ax1, ax2) <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">1</span>,</a>
<a class="sourceLine" id="cb34-6" title="6">                               figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">10</span>))</a>
<a class="sourceLine" id="cb34-7" title="7">a <span class="op">=</span> np.random.randint(low<span class="op">=</span><span class="dv">1</span>, high<span class="op">=</span><span class="dv">11</span>, size<span class="op">=</span><span class="dv">50</span>)</a>
<a class="sourceLine" id="cb34-8" title="8">b <span class="op">=</span> a <span class="op">+</span> np.random.randint(<span class="dv">1</span>, <span class="dv">5</span>, size<span class="op">=</span>a.size)</a>
<a class="sourceLine" id="cb34-9" title="9">x <span class="op">=</span> np.linspace(<span class="dv">0</span>, <span class="dv">1</span>, N)</a>
<a class="sourceLine" id="cb34-10" title="10">y <span class="op">=</span> np.random.gamma(<span class="dv">5</span>, size<span class="op">=</span>N)</a>
<a class="sourceLine" id="cb34-11" title="11">colors <span class="op">=</span> np.random.rand(N)</a>
<a class="sourceLine" id="cb34-12" title="12"></a>
<a class="sourceLine" id="cb34-13" title="13"><span class="co">#####</span></a>
<a class="sourceLine" id="cb34-14" title="14">ax1.scatter(x<span class="op">=</span>a, y<span class="op">=</span>b, marker<span class="op">=</span><span class="st">&#39;o&#39;</span>, c<span class="op">=</span><span class="st">&#39;r&#39;</span>,</a>
<a class="sourceLine" id="cb34-15" title="15">            edgecolor<span class="op">=</span><span class="st">&#39;b&#39;</span>)</a>
<a class="sourceLine" id="cb34-16" title="16">ax2.scatter(</a>
<a class="sourceLine" id="cb34-17" title="17">    x, y,  <span class="co"># x=x, y=y</span></a>
<a class="sourceLine" id="cb34-18" title="18">    s<span class="op">=</span>np.random.randint(<span class="dv">10</span>,<span class="dv">800</span>, N),  <span class="co"># tamaño</span></a>
<a class="sourceLine" id="cb34-19" title="19">    marker<span class="op">=</span><span class="st">&#39;v&#39;</span>,  <span class="co"># tipo de marcador</span></a>
<a class="sourceLine" id="cb34-20" title="20">    c<span class="op">=</span>colors,  <span class="co"># colores</span></a>
<a class="sourceLine" id="cb34-21" title="21">    alpha<span class="op">=</span><span class="fl">0.4</span>  <span class="co"># nivel de transparencia</span></a>
<a class="sourceLine" id="cb34-22" title="22">)</a>
<a class="sourceLine" id="cb34-23" title="23"><span class="co">#####</span></a>
<a class="sourceLine" id="cb34-24" title="24"></a>
<a class="sourceLine" id="cb34-25" title="25">ax1.set_title(<span class="st">&#39;$a$ vs $b$&#39;</span>)</a>
<a class="sourceLine" id="cb34-26" title="26">ax2.set_title(<span class="st">&#39;$x$ vs $y$&#39;</span>)</a>
<a class="sourceLine" id="cb34-27" title="27">fig.suptitle(<span class="st">&quot;Scatterplot&quot;</span>)</a></code></pre></div>
</div><div class="column" style="width:40%;">
<p><img data-src="images/s06/scatter.png" alt="scatter" /><br />
</p>
</div>
</div>
</section><section id="section-52" class="slide level2">
<h2></h2>
<p>Gráfico de barras (barplot)</p>
<div class="columns">
<div class="column smaller" style="width:55%;">
<div class="sourceCode" id="cb35"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb35-1" title="1">ax1.bar(</a>
<a class="sourceLine" id="cb35-2" title="2">    ind,             <span class="co"># eje de abcisas</span></a>
<a class="sourceLine" id="cb35-3" title="3">    men_std,         <span class="co"># eje de ordenadas</span></a>
<a class="sourceLine" id="cb35-4" title="4">    width,           <span class="co"># grosor de barra</span></a>
<a class="sourceLine" id="cb35-5" title="5">    color<span class="op">=</span><span class="st">&#39;#0055ff&#39;</span>  <span class="co"># color de barra (RGB)</span></a>
<a class="sourceLine" id="cb35-6" title="6">)</a>
<a class="sourceLine" id="cb35-7" title="7">ax1.bar(</a>
<a class="sourceLine" id="cb35-8" title="8">    ind,</a>
<a class="sourceLine" id="cb35-9" title="9">    women_std,</a>
<a class="sourceLine" id="cb35-10" title="10">    width,</a>
<a class="sourceLine" id="cb35-11" title="11">    color<span class="op">=</span><span class="st">&#39;#fabada&#39;</span>,</a>
<a class="sourceLine" id="cb35-12" title="12">    bottom<span class="op">=</span>men_std  <span class="co"># apilado</span></a>
<a class="sourceLine" id="cb35-13" title="13">)</a>
<a class="sourceLine" id="cb35-14" title="14"></a>
<a class="sourceLine" id="cb35-15" title="15"><span class="co"># Barras horizontales</span></a>
<a class="sourceLine" id="cb35-16" title="16"></a>
<a class="sourceLine" id="cb35-17" title="17">ax2.barh(  <span class="co"># cambia orden (y, x)</span></a>
<a class="sourceLine" id="cb35-18" title="18">    ind,            <span class="co"># eje &#39;y&#39; !</span></a>
<a class="sourceLine" id="cb35-19" title="19">    men_means,      <span class="co"># eje &#39;x&#39; !</span></a>
<a class="sourceLine" id="cb35-20" title="20">    width,          <span class="co"># grosor de barra</span></a>
<a class="sourceLine" id="cb35-21" title="21">    color<span class="op">=</span><span class="st">&#39;#0055ff&#39;</span> <span class="co"># color (RGB)</span></a>
<a class="sourceLine" id="cb35-22" title="22">)</a>
<a class="sourceLine" id="cb35-23" title="23">ax2.barh( <span class="co"># cambia orden (y, x)</span></a>
<a class="sourceLine" id="cb35-24" title="24">    ind,            <span class="co"># eje &#39;y&#39; !</span></a>
<a class="sourceLine" id="cb35-25" title="25">    women_means,    <span class="co"># eje &#39;x&#39; !</span></a>
<a class="sourceLine" id="cb35-26" title="26">    width,          <span class="co"># grosor de barra</span></a>
<a class="sourceLine" id="cb35-27" title="27">    color<span class="op">=</span><span class="st">&#39;#fabada&#39;</span> <span class="co"># color (RGB)</span></a>
<a class="sourceLine" id="cb35-28" title="28">)</a></code></pre></div>
</div><div class="column" style="width:45%;">
<p><img data-src="images/s06/barplot.png" alt="barplot" /><br />
</p>
</div>
</div>
</section><section id="section-53" class="slide level2">
<h2></h2>
<p>Histograma</p>
<div class="smaller">
<div class="sourceCode" id="cb36"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb36-1" title="1">fig, ax <span class="op">=</span> plt.subplots(<span class="dv">2</span>, figsize<span class="op">=</span>(<span class="dv">10</span>,<span class="dv">5</span>))</a>
<a class="sourceLine" id="cb36-2" title="2">bins <span class="op">=</span> <span class="dv">20</span></a>
<a class="sourceLine" id="cb36-3" title="3">x1 <span class="op">=</span> np.random.gamma(<span class="dv">10</span>, size<span class="op">=</span><span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb36-4" title="4">x2 <span class="op">=</span> np.random.randn(<span class="dv">1000</span>)</a>
<a class="sourceLine" id="cb36-5" title="5">ax1, ax2 <span class="op">=</span> ax.flatten()</a>
<a class="sourceLine" id="cb36-6" title="6"></a>
<a class="sourceLine" id="cb36-7" title="7"><span class="co">#####</span></a>
<a class="sourceLine" id="cb36-8" title="8">(ax1_values, _, _) <span class="op">=</span> ax1.hist(x1, bins<span class="op">=</span>bins, facecolor<span class="op">=</span><span class="st">&#39;brown&#39;</span>, alpha<span class="op">=</span>.<span class="dv">7</span>)<span class="op">;</span></a>
<a class="sourceLine" id="cb36-9" title="9">(_, ax2_bins, _) <span class="op">=</span> ax2.hist(x2, alpha<span class="op">=</span>.<span class="dv">7</span>, cumulative<span class="op">=</span><span class="va">True</span>,</a>
<a class="sourceLine" id="cb36-10" title="10">                            log<span class="op">=</span><span class="va">True</span>, orientation<span class="op">=</span><span class="st">&#39;horizontal&#39;</span>)</a>
<a class="sourceLine" id="cb36-11" title="11"><span class="co">#####</span></a></code></pre></div>
</div>
<p><img data-src="images/s06/hist.png" alt="hist" /><br />
</p>
</section><section id="section-54" class="slide level2">
<h2></h2>
<p>Diagrama circular (pie)</p>
<div class="smaller">
<div class="sourceCode" id="cb37"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb37-1" title="1">ax.pie(</a>
<a class="sourceLine" id="cb37-2" title="2">    [<span class="dv">80</span>, <span class="dv">20</span>], explode<span class="op">=</span>(<span class="dv">0</span>, <span class="fl">.5</span>), labels<span class="op">=</span>labels,</a>
<a class="sourceLine" id="cb37-3" title="3">    colors<span class="op">=</span>colors, shadow<span class="op">=</span><span class="va">True</span>, startangle<span class="op">=</span><span class="dv">90</span></a>
<a class="sourceLine" id="cb37-4" title="4">)</a>
<a class="sourceLine" id="cb37-5" title="5"><span class="co"># ejes iguales = asegurarnos de que se muestre</span></a>
<a class="sourceLine" id="cb37-6" title="6"><span class="co"># como un círculo</span></a>
<a class="sourceLine" id="cb37-7" title="7">ax.axis(<span class="st">&#39;equal&#39;</span>)<span class="op">;</span></a></code></pre></div>
</div>
<p><img data-src="images/s06/piechart.png" alt="piechart" /><br />
</p>
</section><section id="section-55" class="slide level2">
<h2></h2>
<p>Guardar figura a fichero (de forma programática)</p>
<div class="smaller">
<div class="sourceCode" id="cb38"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb38-1" title="1"><span class="im">from</span> sklearn.datasets <span class="im">import</span> load_iris</a>
<a class="sourceLine" id="cb38-2" title="2"></a>
<a class="sourceLine" id="cb38-3" title="3">iris <span class="op">=</span> load_iris()</a>
<a class="sourceLine" id="cb38-4" title="4">plt.style.use(<span class="st">&#39;ggplot&#39;</span>)</a>
<a class="sourceLine" id="cb38-5" title="5">fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">7</span>, <span class="dv">6</span>))</a>
<a class="sourceLine" id="cb38-6" title="6">formatter <span class="op">=</span> plt.FuncFormatter(<span class="kw">lambda</span> i, <span class="op">*</span>args: iris.target_names[<span class="bu">int</span>(i)])</a>
<a class="sourceLine" id="cb38-7" title="7"></a>
<a class="sourceLine" id="cb38-8" title="8">plt.scatter(iris.data[:, <span class="dv">0</span>], iris.data[:, <span class="dv">1</span>], c<span class="op">=</span>iris.target)</a>
<a class="sourceLine" id="cb38-9" title="9">plt.colorbar(ticks<span class="op">=</span>[<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>], <span class="bu">format</span><span class="op">=</span>formatter)</a>
<a class="sourceLine" id="cb38-10" title="10"></a>
<a class="sourceLine" id="cb38-11" title="11"><span class="co">#####</span></a>
<a class="sourceLine" id="cb38-12" title="12">fig.savefig(<span class="st">&#39;iris.pdf&#39;</span>)</a>
<a class="sourceLine" id="cb38-13" title="13"><span class="co">#####</span></a></code></pre></div>
<p>Tipos de fichero soportados, según backend:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb39-1" title="1"><span class="bu">print</span>(fig.canvas.get_supported_filetypes())</a></code></pre></div>
</div>
</section></section>
<section><section id="seaborn" class="title-slide slide level1"><h1><a href="https://seaborn.pydata.org/">Seaborn</a></h1></section><h4 id="seaborn-1">seaborn</h4><section id="section-56" class="slide level2">
<h2></h2>
<ul>
<li>Descargar <a href="code/s06/seaborn_bokeh.ipynb">cuaderno jupyter</a></li>
<li>Abrirlo con <code>jupyter notebook</code></li>
<li>Ejecutar paso a paso de la siguiente sección</li>
</ul>
</section><section id="section-57" class="slide level2">
<h2></h2>
<p>Capa de abstracción que simplifica ciertas tareas enfocadas a análisis estadístico</p>
<div class="columns">
<div class="column smaller" style="width:50%;">
<div class="sourceCode" id="cb40"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb40-1" title="1">sns.<span class="bu">set</span>()  <span class="co"># tema por defecto</span></a>
<a class="sourceLine" id="cb40-2" title="2">crashes <span class="op">=</span> sns.load_dataset(<span class="st">&quot;car_crashes&quot;</span>)</a>
<a class="sourceLine" id="cb40-3" title="3"></a>
<a class="sourceLine" id="cb40-4" title="4"><span class="cf">with</span> sns.color_palette(<span class="st">&quot;husl&quot;</span>, <span class="dv">8</span>):</a>
<a class="sourceLine" id="cb40-5" title="5">    sns.jointplot(</a>
<a class="sourceLine" id="cb40-6" title="6">        <span class="st">&quot;speeding&quot;</span>,</a>
<a class="sourceLine" id="cb40-7" title="7">        <span class="st">&quot;alcohol&quot;</span>,</a>
<a class="sourceLine" id="cb40-8" title="8">        crashes,</a>
<a class="sourceLine" id="cb40-9" title="9">        kind<span class="op">=</span><span class="st">&#39;reg&#39;</span></a>
<a class="sourceLine" id="cb40-10" title="10">    )</a></code></pre></div>
</div><div class="column" style="width:50%;">
<p><img data-src="images/s06/sns_scatter.png" alt="seaborn_scatter" /><br />
</p>
</div>
</div>
</section><section id="section-58" class="slide level2">
<h2></h2>
<p>Con <code>matplotlib</code>: …</p>
<div class="smaller">
<div class="sourceCode" id="cb41"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb41-1" title="1"><span class="im">from</span> scipy.stats <span class="im">import</span> gaussian_kde</a>
<a class="sourceLine" id="cb41-2" title="2"></a>
<a class="sourceLine" id="cb41-3" title="3">ax1 <span class="op">=</span> plt.subplot2grid((<span class="dv">4</span>, <span class="dv">4</span>), (<span class="dv">1</span>, <span class="dv">0</span>), colspan<span class="op">=</span><span class="dv">3</span>, rowspan<span class="op">=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb41-4" title="4">ax2 <span class="op">=</span> plt.subplot2grid((<span class="dv">4</span>, <span class="dv">4</span>), (<span class="dv">0</span>, <span class="dv">0</span>), colspan<span class="op">=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb41-5" title="5">ax3 <span class="op">=</span> plt.subplot2grid((<span class="dv">4</span>, <span class="dv">4</span>), (<span class="dv">1</span>, <span class="dv">3</span>), rowspan<span class="op">=</span><span class="dv">3</span>)</a>
<a class="sourceLine" id="cb41-6" title="6"></a>
<a class="sourceLine" id="cb41-7" title="7">crashes.plot.kde(y<span class="op">=</span><span class="st">&#39;speeding&#39;</span>, ax<span class="op">=</span>ax2, sharex<span class="op">=</span>ax1, legend<span class="op">=</span><span class="va">None</span>)</a>
<a class="sourceLine" id="cb41-8" title="8">crashes.plot.hist(y<span class="op">=</span><span class="st">&#39;speeding&#39;</span>, bins<span class="op">=</span><span class="dv">6</span>, ax<span class="op">=</span>ax2, sharex<span class="op">=</span>ax1, normed<span class="op">=</span><span class="va">True</span>,</a>
<a class="sourceLine" id="cb41-9" title="9">    legend<span class="op">=</span><span class="va">None</span>, alpha<span class="op">=</span>.<span class="dv">5</span>, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</a>
<a class="sourceLine" id="cb41-10" title="10">crashes.plot.scatter(x<span class="op">=</span><span class="st">&#39;speeding&#39;</span>, y<span class="op">=</span><span class="st">&#39;alcohol&#39;</span>, ax<span class="op">=</span>ax1, color<span class="op">=</span><span class="st">&#39;red&#39;</span>, s<span class="op">=</span><span class="dv">50</span>)</a>
<a class="sourceLine" id="cb41-11" title="11"></a>
<a class="sourceLine" id="cb41-12" title="12">ax2.set_ylabel(<span class="st">&#39;&#39;</span>)</a>
<a class="sourceLine" id="cb41-13" title="13">ax2.set_yticks<span class="op">=</span>[]</a>
<a class="sourceLine" id="cb41-14" title="14">ax2.set_yticklabels<span class="op">=</span>[]</a>
<a class="sourceLine" id="cb41-15" title="15"></a>
<a class="sourceLine" id="cb41-16" title="16"><span class="co"># No está soportado directamente el rotado en kde</span></a>
<a class="sourceLine" id="cb41-17" title="17">kde_speeding <span class="op">=</span> gaussian_kde(crashes.alcohol)</a>
<a class="sourceLine" id="cb41-18" title="18">y <span class="op">=</span> np.linspace(np.amin(crashes.alcohol), np.amax(crashes.alcohol), <span class="dv">100</span>)</a>
<a class="sourceLine" id="cb41-19" title="19">ax3.plot(kde_speeding(y), y)</a>
<a class="sourceLine" id="cb41-20" title="20">crashes.plot.hist(y<span class="op">=</span><span class="st">&#39;alcohol&#39;</span>, ax<span class="op">=</span>ax3, sharey<span class="op">=</span>ax1, normed<span class="op">=</span><span class="va">True</span>, legend<span class="op">=</span><span class="va">None</span>,</a>
<a class="sourceLine" id="cb41-21" title="21">    orientation<span class="op">=</span><span class="st">&#39;horizontal&#39;</span>, alpha<span class="op">=</span>.<span class="dv">5</span>, color<span class="op">=</span><span class="st">&#39;red&#39;</span>)</a></code></pre></div>
</div>
</section><section id="section-59" class="slide level2">
<h2></h2>
<p>Multitud de gráficas pre-establecidas</p>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="images/s06/sns_kde1.png" alt="seaborn_kde1" /><br />
</p>
</div><div class="column" style="width:50%;">
<p><img data-src="images/s06/sns_kde2.png" alt="seaborn_kde2" /><br />
</p>
</div>
</div>
</section><section id="section-60" class="slide level2">
<h2></h2>
<div class="smaller">
<p>Permite <a href="sns_context">cambiar temporalmente la estética</a> mediante <code>context managers</code>:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb42-1" title="1"><span class="cf">with</span> sns.axes_style(<span class="st">&quot;ticks&quot;</span>) <span class="kw">and</span> sns.color_palette(<span class="st">&quot;muted&quot;</span>):  <span class="co"># estilo temporal</span></a>
<a class="sourceLine" id="cb42-2" title="2">    sns.pairplot(data<span class="op">=</span>tips,</a>
<a class="sourceLine" id="cb42-3" title="3">                 hue<span class="op">=</span><span class="st">&#39;smoker&#39;</span>,</a>
<a class="sourceLine" id="cb42-4" title="4">                 kind<span class="op">=</span><span class="st">&#39;reg&#39;</span>)</a></code></pre></div>
<p><img data-src="images/s06/sns_pairplot.png" alt="seaborn_pairplot" style="width:40.0%" /><br />
</p>
</div>
</section><section id="section-61" class="slide level2">
<h2></h2>
<p><a href="https://seaborn.pydata.org/examples/index.html">+ ejemplos</a></p>
<p><a href="http://seaborn.pydata.org/tutorial.html">tutorial seaborn</a></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode python"><code class="sourceCode python"><a class="sourceLine" id="cb43-1" title="1">x, y <span class="op">=</span> np.random.multivariate_normal(mean, cov, <span class="dv">1000</span>).T</a>
<a class="sourceLine" id="cb43-2" title="2"><span class="cf">with</span> sns.axes_style(<span class="st">&quot;white&quot;</span>):</a>
<a class="sourceLine" id="cb43-3" title="3">    sns.jointplot(x<span class="op">=</span>x, y<span class="op">=</span>y, kind<span class="op">=</span><span class="st">&quot;hex&quot;</span>, color<span class="op">=</span><span class="st">&quot;k&quot;</span>)<span class="op">;</span></a></code></pre></div>
</section></section>
<section><section id="bokeh" class="title-slide slide level1"><h1><a href="https://bokeh.pydata.org/">Bokeh</a></h1></section><h4 id="bokeh-1"><a href="https://bokeh.pydata.org/">bokeh</a></h4><section id="section-62" class="slide level2">
<h2></h2>
<ul>
<li>Permite generar gráficos “interactivos”</li>
<li>Salida a HTML o integrado en cuaderno <code>jupyter</code></li>
</ul>
<!-- <video data-autoplay src="images/s06/bokeh.webm"></video> -->
<iframe src="code/s06/bokeh.html" width="50%" height="600">
</iframe>
</section></section>
<section><section id="geovisualización" class="title-slide slide level1"><h1>Geovisualización</h1></section><section id="section-63" class="slide level2">
<h2></h2>
<ul>
<li>Librería standard <em>de facto</em>: matplotlib-toolkit (<strong>obsoleta</strong>)</li>
<li>Oficialmente reemplazada por <a href="https://github.com/SciTools/cartopy">cartopy</a> (muy estática)</li>
<li>Alternativa: <a href="http://python-visualization.github.io/folium/">folium</a></li>
</ul>
<p><img data-src="images/s06/geo_1.png" alt="geo_1" /><br />
</p>
</section><section id="cartopy" class="slide level2">
<h2><a href="https://github.com/SciTools/cartopy">Cartopy</a></h2>
<p><a href="nb_cartopy">Cuaderno <code>jupyter</code></a></p>
<p><img data-src="images/s06/geo_2.png" alt="geo_2" /><br />
</p>
</section><section id="folium" class="slide level2">
<h2><a href="http://python-visualization.github.io/folium/">Folium</a></h2>
<p><a href="nb_folium">Cuaderno <code>jupyter</code></a></p>
<!-- ![folium_map]\ -->
<iframe src="code/s06/santander.html" width="100%" height="300">
</iframe>
<p><a href="https://nbviewer.jupyter.org/github/python-visualization/folium/tree/master/examples/">ejemplos online</a></p>
<aside class="notes">
<p>Geopandas???</p>
</aside>
</section></section>
<section><section id="cuadernos-jupyter" class="title-slide slide level1"><h1>Cuadernos <code>jupyter</code></h1></section><h4 id="cuadernos-jupyter-1">Cuadernos <code>jupyter</code></h4><section id="section-64" class="slide level2">
<h2></h2>
<ol type="1">
<li><a href="code/s06/visualizacion_con_matplotlib.ipynb">matplotlib/pyplot</a></li>
<li><a href="code/s06/visualizacion_con_pandas.ipynb">pandas</a></li>
<li><a href="code/s06/practica.ipynb">caso práctico</a> (<a href="code/s06/soluciones.ipynb"><strong>soluciones</strong></a>)</li>
<li><a href="code/s06/pyplot_ii.ipynb">pyplot II</a></li>
<li><a href="code/s06/seaborn_bokeh.ipynb">seaborn + bokeh</a></li>
<li><a href="code/s06/geovisualizacion.ipynb">cartopy</a></li>
<li><a href="code/s06/folium.ipynb">folium</a></li>
</ol>
<!-- enlaces -->
<!-- images -->
<!-- notebooks -->
</section></section>
    </div>
  </div>

  <script src="../lib/js/head.min.js"></script>
  <script src="../js/reveal.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        // Display the page number of the current slide
        slideNumber: true,
        // Push each slide change to the browser history
        history: true,
        // Transition style
        transition: 'fade', // none/fade/slide/convex/concave/zoom
        // Transition speed
        transitionSpeed: 'fast', // default/fast/slow

        // Optional reveal.js plugins
        dependencies: [
          { src: '../lib/js/classList.js', condition: function() { return !document.body.classList; } },
          { src: '../plugin/zoom-js/zoom.js', async: true },
          { src: '../plugin/notes/notes.js', async: true }
        ]
      });
    </script>
    </body>
</html>
